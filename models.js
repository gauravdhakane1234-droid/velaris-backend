const mongoose = require('mongoose'); const architectSchema = new mongoose.Schema({ name: String, phone: String, website: String, instagram: String, leadScore: Number, status: { type: String, default: 'New' }, // New, Contacted, Partner, Active commission_earned: { type: Number, default: 0 }, createdAt: { type: Date, default: Date.now } }); const clientSchema = new mongoose.Schema({ name: String, phone: String, email: String, consultation_paid: { type: Boolean, default: false }, advance_paid: { type: Number, default: 0 }, installation_status: { type: String, default: 'Pending' }, // Pending, Ordered, Shipped, Installed architect_id: { type: mongoose.Schema.Types.ObjectId, ref: 'Architect' }, createdAt: { type: Date, default: Date.now } }); const dealerSchema = new mongoose.Schema({ name: String, phone: String, products: [String], lead_time: String, city: String }); const orderSchema = new mongoose.Schema({ client_id: { type: mongoose.Schema.Types.ObjectId, ref: 'Client' }, architect_id: { type: mongoose.Schema.Types.ObjectId, ref: 'Architect' }, dealer_id: { type: mongoose.Schema.Types.ObjectId, ref: 'Dealer' }, payment_id: { type: mongoose.Schema.Types.ObjectId, ref: 'Payment' }, amount: { type: Number, required: true }, dealer_cost: { type: Number, default: 0 }, architect_commission: { type: Number, default: 0 }, profit: { type: Number, default: 0 }, status: { type: String, default: 'Pending', enum: ['Pending', 'Active', 'Completed', 'Cancelled'] }, notes: String, date: { type: Date, default: Date.now } }); const paymentSchema = new mongoose.Schema({ client_id: { type: mongoose.Schema.Types.ObjectId, ref: 'Client' }, type: String, // Consultation, Advance, Final amount: Number, reference: String, verified: { type: Boolean, default: false }, date: { type: Date, default: Date.now } }); module.exports = { Architect: mongoose.model('Architect', architectSchema), Client: mongoose.model('Client', clientSchema), Dealer: mongoose.model('Dealer', dealerSchema), Order: mongoose.model('Order', orderSchema), Payment: mongoose.model('Payment', paymentSchema) };
